<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{layout :: layout(~{::title}, ~{::#pageStyles}, ~{::section})}"
>
  <head>
    <title>Sign Up</title>
    <th:block id="pageStyles">
        <style>
            .field {
                margin-bottom: 1rem;
            }
            .field label {
                display: block;
            }
            .field input {
                display: block;
            }
        </style>
    </th:block>
  </head>
  <body>
    <section class="pt-4">
      <h1 class="font-medium mb-4">Sign Up</h1>
      <form th:action="@{/signup}" method="post" th:object="${user}">
        <div class="field">
          <label for="name">Name</label>
          <input type="text" id="name" th:field="*{name}" required />
          <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
        </div>

        <div class="field">
          <label for="email">Email</label>
          <input type="email" id="email" th:field="*{email}" required />
          <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
        </div>

        <div class="field">
          <label for="passwordHash">Password</label>
          <input type="password" id="passwordHash" th:field="*{passwordHash}" required />
          <div th:if="${#fields.hasErrors('passwordHash')}" th:errors="*{passwordHash}"></div>
        </div>

        <div class="field">
          <label for="role">Role</label>
          <select id="role" th:field="*{role}">
            <option
              th:each="r : ${T(com.line.library.user.UserRole).values()}"
              th:value="${r}"
              th:text="${r}"
            ></option>
          </select>
          <div th:if="${#fields.hasErrors('role')}" th:errors="*{role}"></div>
        </div>

        <input
          type="hidden"
          th:name="${_csrf.parameterName}"
          th:value="${_csrf.token}"
        />
        <div class="actions" style="margin-top: 8px">
          <button type="submit">Register</button>
          <a th:href="@{/login}" style="margin-left: 8px">Login</a>
        </div>
      </form>
    </section>
  </body>
</html>
